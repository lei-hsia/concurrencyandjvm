### 索引: 排序+查找

索引是数据结构，是排好序的快速查找数据结构

数据本身之外，DB还维护着一个满足特定查找算法的数据结构，这些数据结构以某种方式指向数据，
这样就可以在这些数据结构的基础上实现高级查找算法，这种数据结构就是索引(B tree)

mysql:删数据不是删，只是改flag，原因:
1. 为了bg，cc的数据分析；
2. 便于索引(保存整个树的完整性): 这也是查询快，增删慢的原因: 数据和索引都会变

索引本身也很大, 不可能全部存在内存中，因此索引经常以文件存在磁盘中

优势: 
1. 索引提高检索效率，降低数据库IO成本
2. 对数据排序降低排序成本，降低CPU消耗

实际上索引也是一张表，保存着主键，索引字段，并指向实体表的纪录; 索引的建立是大量研究得出来的

索引分类:
1. 单值索引: 一个索引包含单列
2. 唯一索引: 索引值必须唯一，但是允许NULL
3. 复合索引: 一索引多列

基本语法: 
1. `create [unique] index indexName on mytable(columnname(name))`
2. `alter mytable add [unique] index [indexName] on (columnname(name))`
3. `drop index [indexName] on mytable`
4. `show index from table_name`

搜索过程: 
1. 一颗B+树，浅蓝:磁盘块；包含数据项(深蓝)+指针(黄)
2. 真实数据存在leaf节点，非Leaf节点不存真实数据，只存搜索方向的pointer;
3. 搜索过程 = 磁盘块1 IO加载到内存，查找+磁盘块2 IO加载到内存,查找...

真实情况是, 3层的b+树可表示上百万的数据，如果上百万的数据只需要3次IO，如果没有索引每个
数据都需要一次IO，那么总共需要百万次IO，所以性能提升是巨大的 
 
不适合建索引：
1. 数据量小 
2. 经常增删改的字段 
3. 数值平均分布的字段: e.g. 10w条gender: 0/1: 失效; e.g. 2000条,1980不同数值,
不同程度高: 1980/2000=0.99 建索引好
